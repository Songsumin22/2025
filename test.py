import streamlit as st

st.set_page_config(page_title="과목별 성적대별 문제집 추천", layout="wide")

st.title("📚 과목&등급별 문제집 추천 웹앱")
st.write("과목과 성적대를 선택하면, 추천 문제집 리스트와 공부 루트, 그 이유까지 안내합니다!")

# 과목 & 성적대 선택
subjects = ["국어", "영어", "수학", "과탐", "사탐"]
grades = ["상위권 (1~2등급)", "중위권 (3~4등급)", "하위권 (5등급 이하)"]

col1, col2 = st.columns(2)
with col1:
    subject = st.selectbox("📖 과목 선택", subjects)
with col2:
    grade = st.selectbox("📊 성적대 선택", grades)

# 데이터베이스 (예시)
recommendation_data = {
    "수학": {
        "상위권 (1~2등급)": {
            "문제집": ["정석", "쎈", "블랙라벨", "일품", "한완수"],
            "이유": "빠른 개념 정리 후 심화 문제 중심 학습. 기출+실모로 실전 감각 강화.",
            "공부루트": "정석 → 쎈 → 블랙라벨/일품 → 한완수 → 실전 모의고사",
            "공부루트이유": "개념-유형-심화-실전 단계를 거치면서 완벽한 피라미드 학습 가능."
        },
        "중위권 (3~4등급)": {
            "문제집": ["개념원리", "풍산자 개념완성", "쎈", "RPM", "자이스토리"],
            "이유": "개념 부족을 메우고 반복 연습으로 점수를 올리기 유리.",
            "공부루트": "개념원리 → 풍산자 → 쎈+RPM → 자이스토리 → 수능특강",
            "공부루트이유": "개념 정리와 반복 훈련을 병행하며 내신+수능 대비 동시 진행."
        },
        "하위권 (5등급 이하)": {
            "문제집": ["스타트업", "개념원리 기초", "체크체크", "쉬운 쎈"],
            "이유": "기초부터 다시 다지고 작은 성취감을 쌓는 것이 중요.",
            "공부루트": "스타트업 → 개념원리 기초 → 체크체크 → 쉬운 쎈 → 반복",
            "공부루트이유": "쉬운 개념서와 반복 학습으로 두려움을 줄이고 기초를 확립."
        }
    },
    "영어": {
        "상위권 (1~2등급)": {
            "문제집": ["천일문 핵심", "자이스토리 모의고사", "올림포스 기출"],
            "이유": "고난도 독해와 문법 심화 훈련, 기출+모의고사로 완성.",
            "공부루트": "천일문 → 자이스토리 → 올림포스 → EBS 수능완성",
            "공부루트이유": "문법+독해 균형, 실전 기출을 통한 응용력 강화."
        },
        "중위권 (3~4등급)": {
            "문제집": ["자이스토리 내신편", "마더텅 모의고사", "수능특강"],
            "이유": "내신/수능 기출 반복으로 실전 대비 가능.",
            "공부루트": "내신 자이스토리 → 마더텅 → 수능특강",
            "공부루트이유": "내신+수능 동시 대비, 유형별 약점 보완에 효과적."
        },
        "하위권 (5등급 이하)": {
            "문제집": ["해커스 기초영문법", "EBS Easy 영어", "기본 단어장"],
            "이유": "단어와 문법 기초부터 차근차근 쌓아야 함.",
            "공부루트": "기초 문법 → 단어 암기 → 쉬운 독해 → 반복 학습",
            "공부루트이유": "영어에 대한 두려움을 줄이고 기초 체력부터 강화."
        }
    },
    "국어": {
        "상위권 (1~2등급)": {
            "문제집": ["수능 기출의 바이블", "자이스토리 고전 시가", "마더텅 기출"],
            "이유": "문학 개념 정리 후 기출 문제로 응용력 강화.",
            "공부루트": "바이블 → 자이스토리 → 마더텅 → EBS 연계교재",
            "공부루트이유": "문학/비문학 균형 학습으로 전 영역 실력 유지."
        },
        "중위권 (3~4등급)": {
            "문제집": ["EBS 수능특강", "비상 국어 유형", "마더텅 기출"],
            "이유": "EBS 연계와 기출 반복으로 안정적인 학습.",
            "공부루트": "수능특강 → 비상 유형 → 기출 풀이",
            "공부루트이유": "개념-유형-기출 단계별 학습으로 성적 향상."
        },
        "하위권 (5등급 이하)": {
            "문제집": ["비상 국어 기본", "쉬운 국어 문제집", "EBS 강의 병행"],
            "이유": "독해 기초부터 다지며 점진적 향상.",
            "공부루트": "기본 개념 → 쉬운 문제풀이 → 기출 일부 병행",
            "공부루트이유": "독해/문학 기본기를 먼저 세워야 성적이 오름."
        }
    },
    "과탐": {
        "상위권 (1~2등급)": {
            "문제집": ["EBS 수능특강", "EBS 수능완성", "기출의 미래"],
            "이유": "개념 확립 후 기출 문제로 빠른 실전 감각 형성.",
            "공부루트": "수능특강 → 수능완성 → 기출의 미래",
            "공부루트이유": "개념-심화-실전 기출 3단계 학습 구조."
        },
        "중위권 (3~4등급)": {
            "문제집": ["EBS 개념완성", "자이스토리 과탐", "마더텅 기출"],
            "이유": "개념 부족을 보완하고 기출로 유형 학습.",
            "공부루트": "개념완성 → 자이스토리 → 기출 문제풀이",
            "공부루트이유": "기초를 다지며 점진적으로 문제 적응."
        },
        "하위권 (5등급 이하)": {
            "문제집": ["교과서 정리", "EBS 기본 개념", "쉬운 문제집"],
            "이유": "기본 개념부터 충실히 학습해야 함.",
            "공부루트": "교과서 → 개념 정리 → 쉬운 문제풀이",
            "공부루트이유": "무리하지 않고 기본기를 다지는 것이 우선."
        }
    },
    "사탐": {
        "상위권 (1~2등급)": {
            "문제집": ["EBS 수능특강", "EBS 수능완성", "마더텅 기출"],
            "이유": "연계 교재와 기출 반복으로 안정적 성적 유지.",
            "공부루트": "수능특강 → 수능완성 → 기출 반복",
            "공부루트이유": "이론-연계-실전 3단계 학습법."
        },
        "중위권 (3~4등급)": {
            "문제집": ["EBS 개념완성", "자이스토리 사탐", "마더텅"],
            "이유": "개념 정리 후 기출/유형 연습.",
            "공부루트": "개념완성 → 자이스토리 → 기출풀이",
            "공부루트이유": "유형별 학습으로 약점 보완 가능."
        },
        "하위권 (5등급 이하)": {
            "문제집": ["교과서 요약집", "EBS 기본 개념", "쉬운 문제집"],
            "이유": "개념 이해부터 차근차근 학습.",
            "공부루트": "교과서 → 기본 개념 정리 → 쉬운 문제집",
            "공부루트이유": "기초부터 다져야 성적 향상."
        }
    }
}

# 결과 출력
info = recommendation_data.get(subject, {}).get(grade, None)

if info:
    st.subheader(f"✅ {subject} - {grade} 추천 결과")

    st.markdown("### 📘 추천 문제집 리스트")
    for idx, book in enumerate(info["문제집"], start=1):
        st.write(f"{idx}. {book}")

    st.markdown("### 🤔 추천 이유")
    st.write(info["이유"])

    st.markdown("### 📝 추천 공부 루트")
    st.write(info["공부루트"])

    st.markdown("### 💡 공부 루트 이유")
    st.write(info["공부루트이유"])
else:
    st.warning("선택한 과목/성적대에 대한 데이터가 아직 준비되지 않았습니다.")
